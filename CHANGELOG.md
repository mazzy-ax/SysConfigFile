# SysConfigFile Changelog

see also [Releases on GitHub](https://github.com/mazzy-ax/SysConfigFile/releases) and [Unreleased](https://github.com/mazzy-ax/SysConfigFile/compare/2.1.0...master) on GitHub.

## [2.1.0](https://github.com/mazzy-ax/SysConfigFile/compare/2.0.0...2.1.0) - 2021-02-25

Исправлено:

* метод `filePath()` теперь пытается найти конфигурационный файл не только в файле с указанным именем и с расширением `.config`,
  но и в файлах с расширением `.config.xml`, `xml`, а также в файле, к имени которого расширение не добавляется.

  Если ни один конфигурационный файл не найден, то, как и прежде, используется имя с расширением `.config`.

  Если в config-каталоге присутствуют несколько конфигурационных файлов с одинаковым именем, но с разными расширениями,
  то будет возвращен первый существующий с расширением в порядке `.config`, `.config.xml`, `xml`, без расширения.

* в методе `filePath()` предусмотрен сценарий, когда нужно искать конфигурационные файлы не только с разными расширениями,
  но и в разных каталогах и даже с разными именами. Теперь это просто реализовать.

* метод `load()` проверяет существование файла перед загрузкой

Добавлено:

* добавлены тестовые методы для тестирования нового поведения в методе `filePath()`

## CRLF в .xpo-файлах - 2020-02-28

В git-репозитории обновлены .xpo-файлы. Теперь они содержат `CRLF`, а не `LF`.
Это изменение сделано для тех, кто не пользуется командой `git clone`, а выкачивает и распаковывает .zip-архив из git-репозитория

## [2.0.0](https://github.com/mazzy-ax/SysConfigFile/compare/1.0.0...2.0.0) - 2019-08-10

Добавлено:

* добавлена валидация config-файлов по xsd-схеме
  * для валидации config-файла согласно xsd-схемы добавлены методы `checkFileValid`, `ensureFileValid`, `assertFileValid`
  * для валидации самой схемы добавлены методы `checkSchemaValid`, `ensureSchemaValid`, `assertSchemaValid`
  * класс может прочитать xsd-схему как из ресурсов AOT, так и из xsd-файла
  * добавлены методы `file`, `schema`, `schemaPath`, `schemaResourceName` и приватный метод `xmlSchema`
  * добавлен раздел о валидации в README.md
* добавлена возможность задавать тексты xsd-схемы и config-файла в конструкторе
  * добавлены параметров в конструкторах `new` и `construct`
  * класс кэширует значения параметров только если текст конфига прочитан из файла и не кэширует значения параметров если текст конфига задан в конструкторе
* класс реализует интерфейс SysPackable
  * добавлены методы `pack`/`unpack`
  * добавлен статический конструктор `create`
  * добавлен список приватных переменных `#CurrentList`, которые сериализуются методом `pack`
* добавлены новые тестовые методы в класс `SysConfigFileTest` (всего 80 тестовых методов)

Изменено:

* функция get и getAll раньше удаляла а только пробелы в начале и в конце строки. Теперь эти функции отсекают и пробелы, и табуляции и переводы строк при `System.String.Trim`
* в методе `new` при инициализации переменной `directory` добавляется символ `\`, если его нет в конце строки каталога
* класс бросает исключения только в `ensure`-методах
* упрощена инициализация тестируемых конфигов в существующих тестовых методах класса `SysConfigFileTest`
* обновлен README.md и комментарии в исходном коде

Изменено с потерей совместимости с предыдущей версией:

* название метода `applyLastName` изменено на `parmLastUsedParamName`
* название метода `fileExists` изменено на `checkFileExists`
* название метода `dataFlush` изменено на `clearGlobalCache`
* название метода `parmDefaultDirectory` изменено на `defaultDirectory`, теперь метод только только возвращает каталог по умолчанию. задавать каталог можно только в конструкторе.

## 1.0.0 - 2019-07-16

* Initial release
